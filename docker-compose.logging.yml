services:
  backend:
    environment:
      - LOG_FILE=false
      - LOG_STDOUT=true

  vector:
    image: timberio/vector:0.38.0-alpine
    container_name: game-ai-cs-vector
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./logging/vector/vector.toml:/etc/vector/vector.toml:ro
      - vector_data:/var/lib/vector
    environment:
      - VECTOR_LOG=info
      - LOKI_ENDPOINT=${LOKI_ENDPOINT:-http://loki:3100}
    depends_on:
      - backend
    networks:
      - game-ai-cs-network
    restart: unless-stopped

volumes:
  vector_data:
